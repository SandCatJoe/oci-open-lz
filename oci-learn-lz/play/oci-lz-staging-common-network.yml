# ####################################################################################################### #
# Copyright (c) 2023 Oracle and/or its affiliates,  All rights reserved.                                  #
# Licensed under the Universal Permissive License v 1.0 as shown at https: //oss.oracle.com/licenses/upl. #
# ####################################################################################################### #

---
#network_configuration:
#  default_enable_cis_checks: false
#  default_freeform_tags:
#    lz-data-type: staging
#    lz-version: 0.1
  network_configuration_categories:
    STAGING-COMMON:
      category_compartment_id: CMP-STAGING-COMMON-NETWORK-KEY
      category_freeform_tags:
        sub-environment: staging-common
      vcns:
        VCN-STAGING-COMMON-KEY:
          block_nat_traffic: false
          cidr_blocks:
          - 10.10.0.0/16
          display_name: vcn-staging-common
          dns_label: stage
          is_ipv6enabled: false
          is_oracle_gua_allocation_enabled: false
 
          network_security_groups:
            NSG-01-STAGING-COMMON-VCN-KEY:
              display_name: nsg-01-staging-common-vcn
              egress_rules:
                anywhere:
                  description: egress to 0.0.0.0/0 over TCP
                  dst: 0.0.0.0/0
                  dst_type: CIDR_BLOCK
                  protocol: TCP
                  stateless: false
              freeform_tags: 
              ingress_rules:
                ssh_22:
                  description: ingress from 0.0.0.0/0 over TCP22
                  dst_port_max: 22
                  dst_port_min: 22
                  protocol: TCP
                  src: 0.0.0.0/0
                  src_type: CIDR_BLOCK
                  stateless: false
            NSG-02-STAGING-COMMON-VCN-KEY:
              display_name: nsg-02-staging-common-vcn
              egress_rules:
                anywhere:
                  description: egress to 0.0.0.0/0 over TCP
                  dst: 0.0.0.0/0
                  dst_type: CIDR_BLOCK
                  protocol: TCP
                  stateless: false
              ingress_rules:
                http_80:
                  description: ingress from 0.0.0.0/0 over HTTP8080
                  dst_port_max: 80
                  dst_port_min: 80
                  protocol: TCP
                  src: 0.0.0.0/0
                  src_type: CIDR_BLOCK
                  stateless: false
                https_443:
                  description: ingress from 0.0.0.0/0 over HTTPs443
                  dst_port_max: 443
                  dst_port_min: 443
                  protocol: TCP
                  src: 0.0.0.0/0
                  src_type: CIDR_BLOCK
                  stateless: false
                ssh_22:
                  description: ingress from 0.0.0.0/0 over TCP22
                  dst_port_max: 22
                  dst_port_min: 22
                  protocol: TCP
                  src: 0.0.0.0/0
                  src_type: CIDR_BLOCK
                  stateless: false
            NSG-03-STAGING-COMMON-VCN-KEY:
              display_name: nsg-03-staging-common-vcn
              egress_rules:
                anywhere:
                  description: egress to 0.0.0.0/0 over TCP
                  dst: 0.0.0.0/0
                  dst_type: CIDR_BLOCK
                  protocol: TCP
                  stateless: false
              ingress_rules:
                http_8080:
                  description: ingress from 0.0.0.0/0 over HTTP8080
                  dst_port_max: 80
                  dst_port_min: 80
                  protocol: TCP
                  src: 0.0.0.0/0
                  src_type: CIDR_BLOCK
                  stateless: false
                ssh_22:
                  description: ingress from 0.0.0.0/0 over TCP22
                  dst_port_max: 22
                  dst_port_min: 22
                  protocol: TCP
                  src: 0.0.0.0/0
                  src_type: CIDR_BLOCK
                  stateless: false
 
          default-security-list:
            display_name: sl-def-staging-common-vcn
            egress_rules: []
            ingress_rules:
            - stateless: false
              protocol: ICMP
              description: ICMP type 3 code 4
              src: 0.0.0.0/0
              src_type: CIDR_BLOCK
              icmp_type: 3
              icmp_code: 4
            - stateless: false
              protocol: ICMP
              description: ICMP type 3
              src: 10.0.0.0/18
              src_type: CIDR_BLOCK
              icmp_type: 3
              icmp_code: -1
            - stateless: false
              protocol: ICMP
              description: ICMP type 3
              src: 192.168.0.0/18
              src_type: CIDR_BLOCK
              icmp_type: 3
              icmp_code: -1
          security_lists:
            SECLIST-01-STAGING-COMMON-KEY:
              display_name: sl-staging-common-01
              egress_rules:
              - description: egress to 0.0.0.0/0 over ALL protocols
                dst: 0.0.0.0/0
                dst_type: CIDR_BLOCK
                protocol: ALL
                stateless: false
              freeform_tags: 
              ingress_rules:
              - description: ingress from 0.0.0.0/0 TCP protocol
                protocol: TCP
                src: 0.0.0.0/0
                src_type: CIDR_BLOCK
                stateless: false
            SECLIST-02-STAGING-COMMON-KEY:
              display_name: sl-staging-common-02
              egress_rules:
              - description: egress to 0.0.0.0/0 over TCP
                dst: 0.0.0.0/0
                dst_type: CIDR_BLOCK
                protocol: ALL
                stateless: false
              ingress_rules:
              - description: ingress from 0.0.0.0/0 over all ports
                protocol: ALL
                src: 0.0.0.0/0
                src_type: CIDR_BLOCK
                stateless: false

          route_tables:
            RT-STAGING-COMMON-ANALYSIS-KEY:
              display_name: rt-staging-common-alaysis
              route_rules: {}
            RT-STAGING-COMMON-CICD-KEY:
              display_name: rt-staging-common-cicd
              route_rules: {}
            RT-STAGING-COMMON-DATABASE-KEY:
              display_name: rt-staging-common-database
              route_rules: {}
            RT-STAGING-COMMON-SFTP-KEY:
              display_name: rt-staging-common-sftp
              route_rules: {}
            RT-STAGING-COMMON-BASTION-KEY:
              display_name: rt-staging-common-bastion
              route_rules: {}
            RT-STAGING-COMMON-STORAGE-KEY:
              display_name: rt-staging-common-storage
              route_rules: {}

          subnets:
            SUBNET-STAGING-COMMON-ANALYSIS-KEY:
              cidr_block: 10.10.0.0/24
              dhcp_options_key: default_dhcp_options
              display_name: sn-staging-common-analysis
              dns_label: ana
              ipv6cidr_blocks: []
              prohibit_internet_ingress: true
              prohibit_public_ip_on_vnic: true
              route_table_key: RT-STAGING-COMMON-ANALYSIS-KEY
              security_list_keys:
              - SECLIST-02-STAGING-COMMON-KEY
            SUBNET-STAGING-COMMON-CICD-KEY:
              cidr_block: 10.10.1.0/24
              dhcp_options_key: default_dhcp_options
              display_name: sn-staging-common-cicd
              dns_label: cicd
              ipv6cidr_blocks: []
              prohibit_internet_ingress: true
              prohibit_public_ip_on_vnic: true
              route_table_key: RT-STAGING-COMMON-CICD-KEY
              security_list_keys:
              - SECLIST-02-STAGING-COMMON-KEY
            SUBNET-STAGING-COMMON-DATABASE-KEY:
              cidr_block: 10.10.2.0/24
              dhcp_options_key: default_dhcp_options
              display_name: sn-staging-common-database
              dns_label: db
              ipv6cidr_blocks: []
              prohibit_internet_ingress: true
              prohibit_public_ip_on_vnic: true
              route_table_key: RT-STAGING-COMMON-DATABASE-KEY
              security_list_keys:
              - SECLIST-02-STAGING-COMMON-KEY
            SUBNET-STAGING-COMMON-SFTP-KEY:
              cidr_block: 10.10.3.0/24
              dhcp_options_key: default_dhcp_options
              display_name: sn-staging-common-sftp
              dns_label: sftp
              ipv6cidr_blocks: []
              prohibit_internet_ingress: true
              prohibit_public_ip_on_vnic: true
              route_table_key: RT-STAGING-COMMON-SFTP-KEY
              security_list_keys:
              - SECLIST-02-STAGING-COMMON-KEY
            SUBNET-STAGING-COMMON-BASTION-KEY:
              cidr_block: 10.10.4.0/24
              dhcp_options_key: default_dhcp_options
              display_name: sn-staging-common-bastion
              dns_label: bast
              ipv6cidr_blocks: []
              prohibit_internet_ingress: true
              prohibit_public_ip_on_vnic: true
              route_table_key: RT-STAGING-COMMON-BASTION-KEY
              security_list_keys:
              - SECLIST-02-STAGING-COMMON-KEY
            SUBNET-STAGING-COMMON-STORAGE-KEY:
              cidr_block: 10.10.5.0/24
              dhcp_options_key: default_dhcp_options
              display_name: sn-staging-common-storage
              dns_label: sto
              ipv6cidr_blocks: []
              prohibit_internet_ingress: true
              prohibit_public_ip_on_vnic: true
              route_table_key: RT-STAGING-COMMON-STORAGE-KEY
              security_list_keys:
              - SECLIST-02-STAGING-COMMON-KEY

          vcn_specific_gateways:
            nat_gateways:
              GATEWAY-STAGING-COMMON-NAT-KEY:
                block_traffic: false
                display_name: ngw-staging-common
            service_gateways:
              GATEWAY-STAGING-COMMON-SERVICE-GATEWAY:
                display_name: sg-staging-common
                services: all-services
